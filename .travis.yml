language: cpp

matrix:
  fast_finish: true
  include:
    # The lines from "# BEGIN GENERATED" through "# END GENERATED" are
    # generated by running |python mk/update-travis-yml.py|. Any changes
    # made to those lines will be overwritten while other lines will be left
    # untouched.
    #
    # BEGIN GENERATED

    - env: TARGET=x86_64-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: osx

    - env: TARGET=x86_64-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: osx

    - env: TARGET=x86-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: osx

    - env: TARGET=x86-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: osx

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=ring CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: osx

    - env: TARGET=x86_64-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: osx

    - env: TARGET=x86-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: osx

    - env: TARGET=x86-apple-darwin-macho USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: osx

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - gcc-4.8
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - gcc-5
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86_64-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.9 USE_CXX=g++-4.9 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.9
            - gcc-4.9
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.6 USE_CXX=clang++-3.6 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.6
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.6
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-4.8 USE_CXX=g++-4.8 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-4.8
            - g++-4.8-multilib
            - gcc-4.8
            - gcc-4.8-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang-3.5 USE_CXX=clang++-3.5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - clang-3.5
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - llvm-toolchain-precise-3.5
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=clang USE_CXX=clang++ CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-multilib
            - gcc-multilib
            - libc6-dev-i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=DEBUG
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    - env: TARGET=x86-pc-linux-gnu NO_ASM=NO_ASM=1 USE_CC=gcc-5 USE_CXX=g++-5 CRYPTO=openssl CMAKE_BUILD_TYPE=RELWITHDEBINFO
      os: linux
      addons:
        apt:
          packages:
            - g++-5
            - g++-5-multilib
            - gcc-5
            - gcc-5-multilib
            - linux-libc-dev:i386
          sources:
            - ubuntu-toolchain-r-test

    # END GENERATED

install:
  - |
    if [[ "$GCC_VERSION" != "" ]]
    then export CC="gcc-$GCC_VERSION" CXX="g++-$GCC_VERSION"
    fi

  - |
    if [[ "$CLANG_VERSION" != "" ]]
    then export CC="clang-$CLANG_VERSION" CXX="clang++-$CLANG_VERSION"
    fi

  # clang 3.4 is the default version of clang in Travis CI.
  - if [[ "$CLANG_VERSION" == "3.4" ]]; then export CC=clang CXX=clang++; fi

  - |
    if [[ "$CRYPTO" == "openssl" ]]
    then git clone -b OpenSSL_1_0_2-stable --depth 1 --single-branch \
                   https://github.com/openssl/openssl build/openssl
    else git clone -b wip --depth 1 --single-branch \
                   https://github.com/briansmith/ring build/ring;
    fi

  - |
    git clone -b master --depth 1 --single-branch \
              https://github.com/briansmith/googletest build/gtest

before_script:
  - export CC=$USE_CC CXX=$USE_CXX
  - $CC --version
  - $CXX --version
  - make --version

script:
  - if [[ "$CRYPTO" == "openssl" ]]; then make openssl-configure; fi
  - if [[ "$CRYPTO" == "openssl" ]]; then make openssl; fi
  - make -j2
  - make check
  # Verify nothing was added to source directory during build.
  - '! git clean --dry-run | grep ".*"'
  - make -j2 clean
  # XXX: Because we put GTest and OpenSSL into build/, we don't have a great
  # way of testing that |make clean| deleted everything that was generated.
